<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:combobox="clr-namespace:Syncfusion.Maui.Inputs;assembly=Syncfusion.Maui.Inputs"
             x:Class="MultiStepForm.PaymentView">

    <ScrollView>
        <VerticalStackLayout>
            <VerticalStackLayout x:Name="PaymentFormStack" Spacing="10">
                <Label Text="Payment Method"/>
                <combobox:SfComboBox x:Name="PaymentMethodPicker" Placeholder="Select method" />
                <Label x:Name="PaymentMethodError" Style="{StaticResource ErrorLabelStyle}" IsVisible="False"/>
                
                <!-- Card Details -->
                <VerticalStackLayout x:Name="CardDetailsStack" IsVisible="False" Spacing="6">
                    <Label Text="Card Number"/>
                    <Entry x:Name="CardNumberEntry" Placeholder="XXXX XXXX XXXX XXXX" Keyboard="Numeric"/>
                    <Label x:Name="CardNumberError" Style="{StaticResource ErrorLabelStyle}" IsVisible="False"/>

                    <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                        <VerticalStackLayout>
                            <Label Text="Expiry (MM/YY)"/>
                            <Entry x:Name="ExpiryEntry" Placeholder="MM/YY" Keyboard="Text"/>
                            <Label x:Name="ExpiryError" Style="{StaticResource ErrorLabelStyle}" IsVisible="False"/>
                        </VerticalStackLayout>

                        <VerticalStackLayout Grid.Column="1">
                            <Label Text="CVV"/>
                            <Entry x:Name="CvvEntry" Placeholder="123" Keyboard="Numeric" IsPassword="True"/>
                            <Label x:Name="CvvError" Style="{StaticResource ErrorLabelStyle}" IsVisible="False"/>
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>

                <!-- Billing address -->
                <Label Text="Billing Address"/>
                <Entry x:Name="BillingAddressEntry" Placeholder="Street, City, ZIP"/>
                <Label x:Name="BillingError" Style="{StaticResource ErrorLabelStyle}" IsVisible="False"/>

                <Label Text="Promo Code / Discount Coupon"/>
                <Entry x:Name="PromoEntry" Placeholder="Enter code (optional)"/>
                <Border Padding="10" BackgroundColor="{StaticResource SurfaceAlt}" Margin="0,12,0,0">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="10" />
                    </Border.StrokeShape>

                    <HorizontalStackLayout>
                        <Label Text="Estimated Total: " FontAttributes="Bold"/>
                        <Label x:Name="EstimatedAmountLabel" Text="$0.00" />
                    </HorizontalStackLayout>
                </Border>

                <HorizontalStackLayout Spacing="12" Margin="0,8,0,0">
                    <Button x:Name="BtnBackToAccommodation" Text="Back" />
                    <Button x:Name="BtnPaymentSubmit" Text="Submit Registration" TextColor="White" 
                            BackgroundColor="{StaticResource PrimaryColor}"/>
                </HorizontalStackLayout>
            </VerticalStackLayout>

            <!-- Success Panel -->
            <VerticalStackLayout x:Name="SuccessStack" IsVisible="False" Spacing="10" Margin="0,16,0,0">
                <Border Padding="12" BackgroundColor="{StaticResource SurfaceAlt}">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="10"/>
                    </Border.StrokeShape>

                    <VerticalStackLayout>
                        <Label Text="Registration submitted successfully!" TextColor="{StaticResource AccentColor}" FontAttributes="Bold" FontSize="18"/>
                        <Label Text="You can start a new registration if needed." TextColor="{StaticResource TextMuted}" FontSize="13"/>
                    </VerticalStackLayout>
                </Border>

                <!-- Reset and start a new flow -->
                <Button x:Name="BtnStartNewRegistration" Text="Start New Registration" TextColor="White" 
                        WidthRequest="250" BackgroundColor="{StaticResource AccentColor}"/>
                
            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>

</ContentView>
